<%- include('../partials/header'); %>

<div class="row">
  <%- include('../partials/sidenav'); %>
  <div class="newEntreprise content">
    <h4>Ajouter une entreprise</h4>
    <div class="row white">
      <form class="col s12" method="post" id="formValidate" action="<%= endpoint %>">
          <div class="input-field col s12">
            <label for="name">Nom *</label>
            <input class="validate" type="text" placeholder="ONS RENOV" id="name" name="name" value="<%= entreprise.name %>" data-error=".errorName">
            <div class="errorName"></div>
          </div>

          <div class="input-field col s6">
            <label for="adresse">Adresse *</label>
            <input class="validate" type="text" id="adresse" placeholder="65 rue greneta" name="adresse" value="<%= entreprise.adresse %>" data-error=".errorAdresse">
            <div class="errorAdresse"></div>
          </div>

          <div class="input-field col s6">
            <label for="adresse">Complément d'adresse</label>
            <input class="validate" type="text" placeholder="" name="complement_adresse" value="<%= entreprise.complement_adresse %>" >
            <div class="errorAdress"></div>
          </div>


          <div class="input-field col s6">
            <label for="code_postal">Code Postal *</label>
            <input class="validate" type="number" id="code_postal" placeholder="75002" name="code_postal" value="<%= entreprise.code_postal %>" data-error=".errorZip">
            <div class="errorZip"></div>
          </div>

          <div class="input-field col s6">
            <label for="ville">Ville *</label>
            <input class="validate" type="text" id="ville" name="ville" placeholder="Paris" value="<%= entreprise.ville %>" data-error=".errorVille">
            <div class="errorVille"></div>
          </div>

          <div class="input-field col s6">
            <label for="pays">Pays *</label>
            <input class="validate" type="text" id="pays" placeholder="France" name="pays" value="<%= entreprise.pays %>" data-error=".errorPays">
            <div class="errorPays"></div>
          </div>

          <div class="input-field col s12">
            <label for="description">Description *</label>
            <textarea id="description" name="description" placeholder="Faites appel à notre entreprise, pour toutes vos interventions dans le bâtiment. Du sol au plafond, notre expérience nous permet d'assurer tous travaux." class="materialize-textarea validate" data-error=".errorDescription"><%= entreprise.description %></textarea>
            <div class="errorDescription"></div>
          </div>

          <div class="input-field col s12">
            <label for="domaine">Domaine de compétences *</label>
            <input class="validate" type="text" id="domaine" name="domaine" placeholder="Peinture, Carrelage, Couverture" value="<%= entreprise.domaine %>" data-error=".errorDomaine">
            <div class="errorDomaine"></div>
          </div>

          <div class="input-field col s12">
            <label for="contact">Email *</label>
            <input class="validate" type="email" id="contact" placeholder="onos@contact.fr" name="contact" value="<%= entreprise.contact %>" data-error=".errorEmail" >
            <div class="errorEmail"></div>
          </div>

          <div class="input-field col s6">
            <label for="siret">Siret</label>
            <input class="validate" type="text" placeholder="83284093800019" id="siret" name="siret" value="<%= entreprise.siret %>">
          </div>

          <div class="input-field col s6">
            <label for="tva">Numéro de TVA</label>
            <input class="validate" type="text" id="tva" placeholder="99999999999" name="tva" value="<%= entreprise.tva %>">
          </div>

          <div class="input-field col s6">
            <label for="statut">Statut</label>
            <input class="validate" type="text" placeholder="Société A Responsabilité Limitée (S.A.R.L.)" id="statut" name="statut" value="<%= entreprise.statut %>">
          </div>

          <div class="input-field col s6">
            <label for="telephone">Téléphone</label>
            <input class="validate" type="text" placeholder="0167829038" id="telephone" name="telephone" value="<%= entreprise.telephone %>">
          </div>

          <div class="col s12 hide">
            <p>Association supprimé ?</p>
            <input type="radio" id="is_not_archive" name="is_archive" class="validate" value="false" checked >
            <label for="is_not_archive">Non</label>
          </div>

          <div class="input-field col s12">
            <button class="btn waves-effect waves-light blue" type="submit"  value="Enregistrer" name="action">Ajouter l'entreprise
              <i class="material-icons right">send</i>
            </button>
          </div>
      </form>
    </div>

  </div>
</div>

<%- include('../partials/footer'); %>



<script type="text/javascript">


  $(document).ready(function() {
    $('select').material_select();
  });

  $("#formValidate").validate({
   rules: {
       name: {
           required: true,
           minlength: 3
       },
       adresse: {
           required: true,
           minlength: 5
       },
       code_postal: {
         required: true,
         minlength: 5
       },
       ville: {
         required: true,
       },
       pays: {
         required: true,
        },
        description: {
          required: true,
          minlength:10
        },
        domaine: {
          required: true,
        },
        contact: {
          required: true,
          minlength:10
        },
   },
   //For custom messages
   messages: {
       name:{
           required: "Vous devez saisir le nom de votre entreprise",
           minlength: "Le nom de votre entreprise doit comporter au minimum 3 caractères"
       },
       adresse:{
           required: "Vous devez saisir l'adresse de votre entreprise",
       },
       code_postal:{
           required: "Saisissez le code postal de votre entreprise",
       },
       ville:{
           required: "Saisissez la ville de votre entreprise",
       },
       pays:{
           required: "Saisissez le pays de votre entreprise",
       },
       description:{
           required: "Saisissez une description de votre entreprise",
           minlength: "La description de votre entreprise doit comporter au minimum 10 caractères"
       },
       domaine:{
           required: "Saisissez un domaine de compétence correspondant à votre entreprise",
       },
       contact:{
           required: "Ajoutez une adresse email à votre entreprise",
       },
   },
   errorElement : 'div',
   errorPlacement: function(error, element) {
     var placement = $(element).data('error');
     if (placement) {
       $(placement).append(error)
     } else {
       error.insertAfter(element);
     }
   }
});
</script>
